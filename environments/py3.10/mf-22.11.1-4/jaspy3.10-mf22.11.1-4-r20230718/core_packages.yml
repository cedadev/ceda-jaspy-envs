# for the required packages, versions at least those in jaspy/3.7/r20210320
name: jaspy
channels:
    - conda-forge
    - defaults
dependencies:
  # - matplotlib>=3.3.3
  # - mercurial
    - aiohttp>=3.8.1
    - arpack>=3.7.0
    - astral>=2.2
    - basemap-data-hires>=1.2.2
    - basemap>=1.2.2
    - binutils>=2.36.1
    - blas>=2.115
    - boto3>=1.24.34
    - botocore>=1.27.34
    - cartopy>=0.20.2
    - cdo>=2.0.4
    - cdsapi>=0.5.1
    - certifi>=2022.6.15
    - cf-units>=3.1.1
    - cftime>=1.6.1
    - chardet>=5.0.0
    - cis>=1.7.4
    - cloudpickle>=2.1.0
    - cmocean>=2.0
    - cycler>=0.11.0
    - cython>=0.29.30
    - dask-gateway>=2022.6.1
    - dask>=2022.7.0
    - descartes>=1.1.0
    - eccodes>=2.26.0
    - emacs>=28.1
    - emcee>=3.1.2
    - eofs>=1.4.0
    - esgf-pyclient>=0.3.1
    - esmf>=8.2.0
    - ffmpeg>=5.0.1
    - fftw>=3.3.10
    - filelock>=3.7.1
    - fiona>=1.8.21
    - flake8>=4.0.1
    - flex>=2.6.4
    - fsspec>=2022.5.0
    - gcc>=12.1.0
    - gcc_linux-64>=12.1.0
    - gdal>=3.4.1
    - geopandas>=0.11.0
    - geos>=3.10.2
    - gfortran>=12.1.0
    - gfortran_linux-64>=12.1.0
    - git>=2.37.1
    - glib>=2.72.1
    - gnuplot>=5.4.3
    - graphicsmagick>=1.3.37
    - graphviz>=3.0.0
    - gsl>=2.7.1
    - gtk2>=2.24.33
    - gxx>=12.1.0
    - gxx_linux-64>=12.1.0
    - h5py>=3.7.0
    - hdf5>=1.12.1
    - hdfeos2>=2.20
    - hdfeos5>=5.1.16
    - httplib2>=0.20.4
    - idna>=3.3
    - ilamb>=2.6
    - imagehash>=4.2.1
    - imagemagick>=7.1.0_29
    - intake-esm>=2021.8.17
    - intake-xarray>=0.6.0
    - ipython>=8.4.0
    - iris-grib>=0.18.0
    - iris-sample-data>=2.4.0
    - iris>=3.2.1
    - jags>=4.3.0
    - jasper>=2.0.33
    - jinja2>=3.1.2
    - jmespath>=1.0.1
    - joblib>=1.1.0
    - jug>=2.2.2
    - kiwisolver>=1.4.4
    - lapack>=3.9.0
    - latexcodec>=2.0.1
    - libcdms>=3.1.2
    #====================================================
    # Specific libcurl version required for Spring 2023 release
    # because hdf5 compilation was failing otherwise.
    # Similarly with krb (although not normally listed in core packages)
    # In future, try reverting to non-specific version of libcurl and 
    # remove krb5.
    #
    - libcurl=7.83.1=h7bff187_0
    - krb5=1.19.3=h3790be6_0
    #====================================================
    - libdrs>=3.1.2
    - libgdal>=3.4.1
    - libmo_unpack>=3.1.2
    - libuuid>=2.32.1
    - llvmdev>=14.0.6
    - llvmlite>=0.38.1
    - locket>=1.0.0
    - markupsafe>=2.1.1
    - minio>=7.1.10
    - mo_pack>=0.2.0
    - mock>=4.0.3
    - mpi4py>=3.1.3
    - mpmath>=1.2.1
    - nbconvert>=6.5.0
    - nc-time-axis>=1.4.1
    - nccmp>=1.9.1.0
    - ncview>=2.1.8
    - netcdf-cxx4>=4.3.1
    - netcdf-fortran>=4.5.4
    - netcdf4>=1.6.0
    - nose>=1.3.7
    - numba>=0.55.2
    - numpy>=1.22.4
    - openmpi>=4.1.4
    - packaging>=21.3
    - pandas>=1.4.3
    - parallel>=20220522
    - partd>=1.2.0
    - patsy>=0.5.2
    - pep8>=1.7.1
    - perl-xml-parser>=2.44_01
    - perl>=5.32.1
    - pillow>=9.2.0
    - pip>=22.1.2
    - pooch>=1.6.0  # pooch needed for xarray tests
    - postgresql>=14.2
    - psutil>=5.9.1
    - psycopg2>=2.9.3
    - pyaml>=21.10.1
    - pybtex>=0.24.0
    - pycairo>=1.21.0
    - pycodestyle>=2.8.0
    - pydap>=3.3.0
    - pygments>=2.12.0
    - pygobject>=3.42.2
    - pygrib>=2.1.4
    - pyhdf>=0.10.5
    - pyke>=1.1.1
    - pylint>=2.14.5
    - pyparsing>=3.0.9
    - pyproj>=3.3.0
    - pyshp>=2.3.0
    - pyside2>=5.13.2
    - pysoundfile>=0.10.3.post1
    - pyspharm>=1.0.9
    - pytest>=7.1.2
    - python-dateutil>=2.8.2
    - python-eccodes>=1.4.2
    - python-graphviz>=0.20
    - python>=3.10.5 # USE LATEST VERSION?
    - pytz>=2022.1
    - pyugrid>=0.3.1
    - pyyaml>=6.0
    - pyzmq>=23.2.0
    - qt>=5.12.9
    - requests>=2.28.1
    - s3transfer>=0.6.0
    - scandir>=1.10.0
    - scikit-image>=0.19.3
    - scikit-learn>=1.1.1
    - scipy>=1.8.1
    - seaborn>=0.11.2
    - setuptools>=63.2.0
    - shapely>=1.8.2
    - singledispatch>=3.7.0
    - six>=1.16.0
    - spectral>=0.22.4
    - sphinx>=5.0.2
    - sqlalchemy>=1.4.39
    - sqlite>=3.39.1
    - statsmodels>=0.13.2
    - sympy>=1.10.1
    - tcsh>=6.24.01
    - tk>=8.6.12
    - tmux>=3.3
    - toolz>=0.12.0
    - tornado>=6.1
    - tqdm>=4.64.0
    - udunits2>=2.2.28
    - urllib3>=1.26.10
    - valgrind>=3.18.1
    - virtualenv>=20.15.1
    - webob>=1.8.7
    - windspharm>=1.7.0
    - wxpython>=4.1.1
    - xarray>=2022.3.0
    # numba required for xesmf 0.6.2 but deps not set up
    - xesmf>=0.6.3
    - xgcm>=0.8.0
    - xhistogram>=0.3.1
    - xorg-libx11>=1.6.12

#============================================================
# PACKAGES THAT WERE REMOVED
#============================================================
#
#    - nctoolkit>=0.4.9
#    - libgcc-ng>=11.2.0
#    - libgcc>=11.2.0
#    - mpich
#    - qgis
#    - rpy2>=3.4.2
#    - dask-tensorflow
##: FAIL: mercurial -> python[version='>=2.7,<2.8.0a0']
##GraphicsMagick-c++
##python27-cerbere
#
# These removed for the time being because of dependence on older versions of C / fortran libraries
#  - aim to reinstate in a later Jaspy
#
#    - theano>=1.0.5
#    - pymc3>=3.7
#    - pystan>=2.17.1.0
#    - pyngl>=1.6.1  ## NOW restored
#    - pyferret>=7.63
# 
# These removed (and put in jasmin-sci) because of problems with gsl dependencies, so are broken.
# Aim to reinstate in a later jaspy.  Note: the conda environment will resolve with these, but they
# do not run.
#   
#    - ncl >= 6.6.2
#    - nco >= 5.0.7
#    - nctoolkit (incompatible with CDO 2.0.0 and above)
#
# We should at that time also add pynco and remove the equivalent pip package below (called nco).
#
# (Note: a later version of nctoolkit, which is compatible with the later CDO, is already available
# but seems to be incompatible with something else in the environment.)
#
#============================================================
# NEW PACKAGES
#============================================================
# New packages for this release (no previous version, hence no version numbers here,
# but should be given >= version numbers next time)
    - cmake
    - regionmask
    - numexpr
    - cfgrib
    - gdb
    - autoconf
    - qgis
    - rasterio
    - satpy
    - rioxarray
    - regionmask
    - wrf-python
    - qtconsole
    - ipyleaflet
    # readding some that were removed...
    - keras
    - tensorflow
    - tensorflow-estimator
    - openjdk
    
#Pip installs
    - pip:
      - git+https://github.com/cedadev/nappy # CHECK VERSION
      - bigtiff>=0.1.2
      - ccplot>=2.1.1
      - cf-plot>=3.1.23
      - cf-python>=3.13.0
      - cfchecker>=4.1.0
      - ecmwf-api-client>=1.6.3
      - f90nml>=1.4.3
      # oggm needed for xarray tests
      - oggm>=1.5.3  
      - pipenv>=2022.7.4
      - pygeode>=1.4.1
      - pypdftk>=0.5
      - simplejson # CHECK VERSION
      # re nco, see above comment re pynco
      - nco>=1.0.0
      - cf_view
